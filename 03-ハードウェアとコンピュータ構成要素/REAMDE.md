# ハードウェアとコンピュータ構成要素

## ハードウェア

- 順序論理回路
  - RSフリップフロップ
    - s=0, r=1でx=1, y=0
    - s=1, r=0でx=0, y=1
- LSI
  - Large Scale Integration
  - 大規模集積回路
  - 関連技術
    - FPGA
    - SystemC
    - IPコア
      - SoC
        - System on a Chip
  - ダイナミック電力の低減
    - 定義
      - $fV^2$
    - マルチ$V_{DD}$
    - DVS
      - Dynamic Voltage Scaling
    - DVFS
      - Dynamic Voltage and Frequency Scaling
  - スタティック電力の低減
    - 定義
      - リーク電力
    - パワーゲーティング
      - 電源供給遮断でリテンションFFを使用
- データコンバータ
  - A/Dコンバータに必要な最小のビット数の計算
    - 入力電圧の上限-LSB=最大値
- コンピュータ制御
  - シーケンス制御
    - PLC
      - Programmable Logic Controller
    - ラダー図
  - フィードバック制御
    - フィードフォワード制御と併用
- アクチュエータ
  - 電気式
  - 油圧式
  - 空気圧式
  - モータ
    - DCサーボモータ
    - DCブラシレスモータ
    - ステッピングモータ
  - DCサーボモータ
  - DCブラシレスモータ
  - ステッピングモータ
  - アクチュエータ駆動回路
    - PMW
      - Pulse Width Modulation
      - デューティ比
  - PMW
    - Pulse Width Modulation
    - デューティ比
  - Pulse Width Modulation
  - デューティ比

## プロセッサアーキテクチャ

- プロセッサの種類
  - MPU
    - Micro Processing Unit
  - マルチコアプロセッサ
  - DSP
    - Disital Signal Processor
    - 積和演算
  - GPU
- 方式
  - CISC
    - Complex Instruction Set Computer
    - メリット
      - 複雑が故プログラマは楽
    - デメリット
      - 命令の処理長さがばらばらでCPUに負担
    - 特徴
      - マイクロプログラム
  - RISC
    - Reduced Instruction Set Computer
    - メリット
      - 命令の処理時間が均一
      - パイプライン処理など処理速度向上技術が簡単
    - デメリット
      - プログラマの手間が増大
    - 特徴
      - ワイヤードロジック
- 構成
  - 制御装置
  - 演算装置
  - レジスタ
- 命令の実行
  - ストアドプログラム方式
    - ノイマン型
    - フォンノイマンボトルネック
  - 順序
    1. 命令フェッチ
    2. 命令解読
    3. オペランド(データ)のアドレス計算
    4. オペランドフェッチ
    5. 実行
- オペランドのアドレス計算
  - アドレス指定方式
    - 命令部，アドレス(オペランド)部を持つ
  - 方式の種類
    - 直接アドレス指定方式
    - 間接アドレス指定方式
    - インデックスアドレス指定方式
    - ベースアドレス指定方式
      - リロケータブル
- バイトオーダ
  - ex. $ABCD1234_{(16)}$
  - ビッグエンディアン
    - $AB, CD, 12, 34$
  - リトルエンディアン
    - $34, 12, CD, AB$
- 割込み
  - PSW
    - Program Status Word
    - 元のプログラムの情報を保持
  - 多重割込み
  - マスカブル割込み，ノンマスカブル割込み
  - 種類
    - CPUの内部か外部化
    - 内部割込み
      - プログラム割込み
      - SVC割込み
      - ページフォールト
    - 外部割込み
      - タイマ割込み
      - コンソール割込み
      - 入出力割込み
      - 機械チェック割込み

## プロセッサの高速化技術

- パイプライン
  - パイプラインハザード
    - 制御(分岐)ハザード
      - 投機実行
      - 遅延分岐
    - データハザード
  - パイプライン処理効果
    - $(D + N -1) × P$
    - パイプラインの深さ: D
    - パイプラインピッチ: P
    - 命令数: N
  - スーパスカラ
    - スーパスカラ度
    - アウトオブオーダー実行
    - キーワード
      - 複数のパイプライン
      - 実行時に(動的に)順序を決める
  - VLIW
    - Very Long Instruction Word
    - NOP命令
      - No OPeration
    - インオーダー実行
    - キーワード
      - 長い命令語
      - 1つの命令にまとめる
- CPI
  - Cycles Per Instruction
- 並列処理
  - マルチコア
  - 4つのアーキテクチャ
    - SISD
      - Single Instruction stream Single Data stream
    - SIMD
      - Single Instruction stream Multiple Data stream
    - MISD
      - Multiple Instruction stream Single Data stream
    - MIMD
      - Multiple Instruction stream Multiple Data stream
      - MPP
        - Massively Parallel Processor
- マルチプロセッサ
  - 密結合マルチプロセッサ
    - 共通バス
    - OSは単一
  - 疎結合マルチプロセッサ
    - プロセッサ毎にOSが必要
  - アムダールの法則
    - $E=\frac{1}{1-r+(\frac{r}{n})}$
    - 単一プロセッサの時と比べた倍率: E
    - プロセッサの台数: n
    - 並列可能割合: r
- プロセッサの性能
  - 命令実行時間 = クロックサイクル時間 × CPI
  - = クロック周波数の逆数 × CPI
- クロックの分周

## メモリアーキテクチャ

- 揮発性メモリ
  - SRAM
    - Static Random Access Memory
    - キャッシュメモリ
  - DRAM
    - Dynamic Random Access Memory
    - 主記憶装置
- 不揮発性メモリ
  - フラッシュメモリ
    - NAND型フラッシュメモリ
      - 書き込み速い、大容量
      - USBメモリ、SSD、携帯メモリ
      - 記憶方式
        - SLC
          - Single-Level-Cell
        - MLC
          - Multi-Level-Cell
        - TLC
          - Triple-Level-Cell
    - NOR型フラッシュメモリ
      - 読み出し速い
      - ファームウェア
  - FeRAM
    - Ferroelectric Random Access Memory
    - 強誘電体メモリ
- 記憶階層
  - CPUと主記憶装置の間に
    - L1キャッシュ、L2キャッシュ
  - 主記憶装置と補助記憶装置(磁気ディスク装置)の間に
    - ディスクキャッシュ
- 主記憶への書き込み
  - ライトスルー方式
    - 一貫性(コヒーレンシ)を保持
    - 遅い
  - ライトバック方式
    - 速い
    - コヒーレンシを保持できない
    - LRUアルゴリズム
      - Least Recentry Usedアルゴリズム
      - 最後に参照された時間が最も古いものから消す
    - スヌープ方式
      - マルチプロセッサで起こりうるデータ不整合
      - バスで監視
- 割付方式
  - ダイレクトマッピング方式
    - キャッシュで1対1
  - フルアソシアティブ方式
    - 空きブロックを探すのみ
    - オーバーヘッドが大きく、複雑
  - セットアソシアティブ方式
    - キャッシュで1対多
    - 追い出されにくい
- メモリインタリーブ
  - 主記憶を分割

## 入出力アーキテクチャ

- 入出力制御方式
  - プログラム制御方式
    - CPUガ直接入出力を制御
  - DMA制御方式
    - 外部装置と主記憶装置の間でデータ伝送
    - DMAコントローラに指示する
  - チャネル制御方式
    - 外部装置と主記憶装置の間でデータ伝送
    - 外部装置のチャネルに指示する
    - チャネル指令語(CCW)
    - チャネルアドレス語(CAW)
    - 種類
      - マルチプレクサチャネル方式
      - セレクタチャネル方式
- インタフェース規格
  - シリアルインタフェース
    - こっちが単純かつ安価で主流
  - パラレルインタフェース
  - USB
    - Universal Serial Bus
    - プラグアンドプレイ、ホットプラグ
